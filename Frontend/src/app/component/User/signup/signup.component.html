<app-navbar></app-navbar>

<div class="min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 flex items-center justify-center py-12 px-4">
  <div class="bg-white p-10 rounded-xl shadow-2xl w-full max-w-md">
    <h2 class="text-3xl font-extrabold text-center text-gray-800 mb-6">Create Account</h2>

    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="space-y-5">

      <!-- First Name Input with Icon -->
      <div class="relative">
        <label for="fname" class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
        <div class="relative">
          <input
            type="text"
            id="fname"
            formControlName="fname"
            placeholder="Enter first name"
            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-200"
            [class.border-red-500]="getFieldError('fname')"
          />
          <div class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
            </svg>
          </div>
        </div>
          @if(errorMessage && errorMessage.fname) {
              <div class="text-red-500 text-xs mt-1">{{ errorMessage.fname[0] }}</div>
                                            }
        <div class="text-red-500 text-xs mt-1" *ngIf="getFieldError('fname')">
          {{ getFieldError('fname') }}
        </div>
      </div>

      <!-- Last Name Input with Icon -->
      <div class="relative">
        <label for="lname" class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
        <div class="relative">
          <input
            type="text"
            id="lname"
            formControlName="lname"
            placeholder="Enter last name"
            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-200"
            [class.border-red-500]="getFieldError('lname')"
          />
          <div class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
            </svg>
          </div>
        </div>
        <div class="text-red-500 text-xs mt-1" *ngIf="getFieldError('lname')">
          {{ getFieldError('lname') }}
        </div>
      </div>

      <!-- Username Input with Icon -->
      <div class="relative">
        <label for="user_name" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
        <div class="relative">
          <input
            type="text"
            id="user_name"
            formControlName="user_name"
            placeholder="Choose a username"
            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-200"
            [class.border-red-500]="getFieldError('user_name')"
          />
          <div class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="4"/>
              <path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"/>
            </svg>
          </div>
        </div>
         @if(errorMessage && errorMessage.user_name) {
              <div class="text-red-500 text-xs mt-1">{{ errorMessage.user_name[0] }}</div>
                                            }
        <div class="text-red-500 text-xs mt-1" *ngIf="getFieldError('user_name')">
          {{ getFieldError('user_name') }}
        </div>
      </div>

      <!-- Email Input with Icon -->
      <div class="relative">
        <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
        <div class="relative">
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="you@example.com"
            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-200"
            [class.border-red-500]="getFieldError('email')"
          />
          <div class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="m4 4 7.07 17 2.51-7.39 7.39-2.51L4 4z"/>
              <path d="m14 6 6 6-6 6"/>
            </svg>
          </div>

        </div>
         @if(errorMessage && errorMessage.email) {
              <div class="text-red-500 text-xs mt-1">{{ errorMessage.email[0] }}</div>
                                            }
        <div class="text-red-500 text-xs mt-1" *ngIf="getFieldError('email')">
          {{ getFieldError('email') }}
        </div>
      </div>

      <!-- Password Input with Icon & Toggle -->
      <div class="relative">
        <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
        <div class="relative">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            formControlName="password"
            placeholder="••••••••"
            class="w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-200"
            [class.border-red-500]="getFieldError('password')"
          />
          <div class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 11c.828 0 1.5-.672 1.5-1.5S12.828 8 12 8s-1.5.672-1.5 1.5S11.172 11 12 11z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 11V7a6 6 0 0112 0v4" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 11h16v10H4z" />
            </svg>
          </div>
          <button
            type="button"
            (click)="togglePassword()"
            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-800"
          >
            <ng-container *ngIf="showPassword; else hiddenIcon">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7s-8.268-2.943-9.542-7z" />
              </svg>
            </ng-container>
            <ng-template #hiddenIcon>
              <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 3l18 18M4.318 4.318a9.954 9.954 0 00-2.318 5.682c1.274 4.057 5.064 7 9.542 7 1.826 0 3.547-.493 5.037-1.355M12 5c4.478 0 8.268 2.943 9.542 7a9.956 9.956 0 01-1.596 3.145" />
              </svg>
            </ng-template>
          </button>
        </div>
        <div class="text-red-500 text-xs mt-1" *ngIf="getFieldError('password')">
          {{ getFieldError('password') }}
        </div>
      </div>

      <!-- Confirm Password Input with Icon & Toggle -->
      <div class="relative">
        <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-1">Confirm Password</label>
        <div class="relative">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="confirmPassword"
            formControlName="confirmPassword"
            placeholder="••••••••"
            class="w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-200"
            [class.border-red-500]="getFieldError('confirmPassword')"
          />
          <div class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 11c.828 0 1.5-.672 1.5-1.5S12.828 8 12 8s-1.5.672-1.5 1.5S11.172 11 12 11z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 11V7a6 6 0 0112 0v4" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 11h16v10H4z" />
            </svg>
          </div>
          <button
            type="button"
            (click)="togglePassword()"
            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-800"
          >
            <ng-container *ngIf="showPassword; else hiddenIcon2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7s-8.268-2.943-9.542-7z" />
              </svg>
            </ng-container>
            <ng-template #hiddenIcon2>
              <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 3l18 18M4.318 4.318a9.954 9.954 0 00-2.318 5.682c1.274 4.057 5.064 7 9.542 7 1.826 0 3.547-.493 5.037-1.355M12 5c4.478 0 8.268 2.943 9.542 7a9.956 9.956 0 01-1.596 3.145" />
              </svg>
            </ng-template>
          </button>
        </div>
        <div class="text-red-500 text-xs mt-1" *ngIf="getFieldError('confirmPassword')">
          {{ getFieldError('confirmPassword') }}
        </div>
      </div>

      <!-- Gender Selection -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Gender</label>
        <div class="flex gap-6">
          <label class="flex items-center text-sm">
            <input
              type="radio"
              formControlName="gender"
              value="male"
              class="w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 mr-2"
            />
            <span class="text-gray-700">Male</span>
          </label>
          <label class="flex items-center text-sm">
            <input
              type="radio"
              formControlName="gender"
              value="female"
              class="w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 mr-2"
            />
            <span class="text-gray-700">Female</span>
          </label>
        </div>
        <div class="text-red-500 text-xs mt-1" *ngIf="getFieldError('gender')">
          {{ getFieldError('gender') }}
        </div>
      </div>

      <!-- Profile Image Upload -->
      <div>
        <label for="img" class="block text-sm font-medium text-gray-700 mb-2">Profile Image</label>
        <div class="relative">
          <input
            type="file"
            id="img"
            accept="image/*"
            (change)="onImageSelected($event)"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-200 file:mr-4 file:py-1 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-600 hover:file:bg-blue-100"
          />
        </div>
      </div>

      <!-- Submit Button -->
      <button
        type="submit"
        class="w-full py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 disabled:opacity-50 disabled:cursor-not-allowed"
      >
       Create Account
      </button>

      <!-- Error Message -->
     @if(errorMessage && errorMessage.email) {
  <p class="text-red-500 text-sm mt-2 text-center">{{ errorMessage.email[0] }}</p>
}
      <!-- Login Redirect -->
      <div class="text-sm text-center text-gray-600 mt-3">
        Already have an account?
        <a routerLink="/login" class="text-blue-600 hover:underline">Log in here</a>
      </div>
    </form>
  </div>
</div>
